from typing import Annotated

from dotenv import load_dotenv
from langchain_core.runnables import RunnableConfig
from langgraph.prebuilt import ToolNode
from typing_extensions import TypedDict

from langgraph.graph import StateGraph, START, END
from langgraph.graph.message import add_messages

from agents.chinese_mainland.bearish_trader import BearishTrader
from utils.state import State
from core.llms.qwen.qwen_api import QwenApi
from core.llms.tools.get_company_info import get_stock_info
from agents.chinese_mainland.fundamental_analysis_expert import FundamentalAnalysisExpert
from agents.chinese_mainland.trend_analysis_expert import  TrendAnalysisExpert
from agents.chinese_mainland.bullish_trader import BullishTrader
from langgraph.checkpoint.memory import InMemorySaver
from loguru import logger

from IPython.display import Image, display


dummy_fundamental_analysis = f"""# ç‰§åŸè‚¡ä»½ï¼ˆ002714ï¼‰åŸºæœ¬é¢æ·±åº¦åˆ†ææŠ¥å‘Š  
**å½“å‰è‚¡ä»·ï¼š54.38å…ƒ | åŠ¨æ€PEï¼š14.11 | PBï¼š3.84 | æŠ¥å‘Šæ—¥æœŸï¼š2025-09-19**

---

## ä¸€ã€æ ¸å¿ƒè´¢åŠ¡æ•°æ®ä¸è¶‹åŠ¿åˆ†æï¼ˆåŸºäºçœŸå®è´¢æŠ¥ï¼‰

### 1. ç›ˆåˆ©èƒ½åŠ›æ¢å¤å¼ºåŠ²ï¼Œå‘¨æœŸåº•éƒ¨å·²è¿‡
ç‰§åŸè‚¡ä»½ä½œä¸ºä¸­å›½æœ€å¤§çš„ç”ŸçŒªå…»æ®–ä¼ä¸šï¼Œè¿‡å»ä¸‰å¹´ç»å†è¡Œä¸šæ·±åº¦äºæŸå‘¨æœŸï¼ˆ2022Q1â€“2023Q4ï¼‰ï¼Œä½†**2024å¹´Q3èµ·è¿æ¥ç›ˆåˆ©åè½¬**ï¼Œ2025å¹´Q2å‡€åˆ©æ¶¦è¾¾**105.3äº¿å…ƒ**ï¼ŒåŒæ¯”æš´å¢**1169.77%**ï¼ŒEPSè¾¾**1.96å…ƒ**ï¼Œç›ˆåˆ©èƒ½åŠ›å·²æ¢å¤è‡³å†å²é«˜ä½æ°´å¹³ã€‚

| è´¢æŠ¥æœŸ | å‡€åˆ©æ¶¦ï¼ˆäº¿å…ƒï¼‰ | YoY% | EPSï¼ˆå…ƒï¼‰ | æ¯›åˆ©ç‡ |
|--------|----------------|------|-----------|--------|
| 2022Q4 | 132.66         | 92.16% | 2.49      | 17.50% |
| 2023Q4 | -42.63         | -132.14% | -0.79     | 3.11%  |
| 2024Q4 | 178.81         | 519.42% | 3.30      | 19.05% |
| 2025Q2 | 105.30         | 1169.77% | 1.96      | 19.02% |

> âœ… **ç»“è®º**ï¼šå…¬å¸å·²ä»å‘¨æœŸè°·åº•å¼ºåŠ¿å¤è‹ï¼Œ2025å¹´Q2ç›ˆåˆ©èƒ½åŠ›è¶…è¶Š2024å¹´å…¨å¹´å•å­£æ°´å¹³ï¼Œæ˜¾ç¤º**æˆæœ¬æ§åˆ¶ï¼ˆè‡ªç¹è‡ªå…»æ¨¡å¼ï¼‰ä¸çŒªä»·ä¸Šè¡Œå‘¨æœŸåŒé‡é©±åŠ¨**ã€‚

### 2. æˆæœ¬ä¼˜åŠ¿ä¸ç°é‡‘æµå¼ºåŠ²
- **2025Q2ç°é‡‘æµé‡å‡€é¢/è‚¡ï¼š3.18å…ƒ**ï¼Œè¿œé«˜äºå‡€åˆ©æ¶¦ï¼ˆ1.96å…ƒï¼‰ï¼Œè¯´æ˜**åˆ©æ¶¦è´¨é‡é«˜ã€éç°é‡‘æ”¶å…¥å°‘**ã€‚
- **æ¯›åˆ©ç‡ç¨³å®šåœ¨19%**ï¼Œé«˜äºè¡Œä¸šå¹³å‡ï¼ˆçº¦12â€“15%ï¼‰ï¼Œåæ˜ å…¶**å‚ç›´ä¸€ä½“åŒ–å…»æ®–æ¨¡å¼çš„æˆæœ¬æ§åˆ¶èƒ½åŠ›**ã€‚
- **ROEä»2023Q4çš„-6.38%å›å‡è‡³2025Q2çš„13.79%**ï¼Œèµ„æœ¬å›æŠ¥æ•ˆç‡æ˜¾è‘—ä¿®å¤ã€‚

---

## äºŒã€ä¼°å€¼æ¨¡å‹åˆ†æï¼ˆåŸºäºçœŸå®æ•°æ®ï¼‰

### 1. **åŠ¨æ€PEä¼°å€¼ï¼ˆ14.11å€ï¼‰**
- å½“å‰åŠ¨æ€PE = 54.38 / 2025Q2 EPS Ã— 4 = 54.38 / (1.96 Ã— 4) = 54.38 / 7.84 â‰ˆ **6.94å€**ï¼ˆ**é”™è¯¯ï¼**ï¼‰
- **çº æ­£**ï¼šåŠ¨æ€PEæ˜¯åŸºäº**æœ€è¿‘12ä¸ªæœˆï¼ˆTTMï¼‰å‡€åˆ©æ¶¦**è®¡ç®—ã€‚  
  TTMå‡€åˆ©æ¶¦ = 2024Q3 + 2024Q4 + 2025Q1 + 2025Q2  
  = 104.81 + 178.81 + 44.91 + 105.30 = **433.83äº¿å…ƒ**  
  æ€»è‚¡æœ¬ = å‡€åˆ©æ¶¦ / EPSï¼ˆ2025Q2ï¼‰= 105.30 / 1.96 â‰ˆ **53.72äº¿è‚¡**  
  TTM EPS = 433.83 / 53.72 â‰ˆ **8.08å…ƒ**  
  **åŠ¨æ€PE = 54.38 / 8.08 â‰ˆ 6.73å€**

> â—**åŸå§‹æ•°æ®â€œåŠ¨æ€PE:14.11â€æ˜æ˜¾é”™è¯¯**ï¼Œåº”ä¸º**6.73å€**ï¼ˆåŸºäºçœŸå®TTMåˆ©æ¶¦ï¼‰ã€‚  
> **è¡Œä¸šå¯¹æ¯”**ï¼šæ¸©æ°è‚¡ä»½åŠ¨æ€PEçº¦12å€ï¼Œæ–°å¸Œæœ›çº¦15å€ã€‚ç‰§åŸ**æ˜¾è‘—ä½ä¼°**ã€‚

### 2. **PBä¼°å€¼ï¼ˆ3.84å€ï¼‰**
- 2025Q2å‡€èµ„äº§/è‚¡ = 14.17å…ƒ  
- å½“å‰è‚¡ä»·54.38å…ƒ â†’ PB = 54.38 / 14.17 â‰ˆ **3.84å€**  
- **å†å²PBåŒºé—´**ï¼š2020å¹´é«˜ç‚¹è¾¾10å€ï¼Œ2022â€“2023å¹´ä½è°·ä¸º2.0â€“2.5å€  
- **åˆç†PBåŒºé—´**ï¼šå½“å‰è¡Œä¸šå¹³å‡PBä¸º3.2â€“4.0å€ï¼Œç‰§åŸèµ„äº§è´¨é‡ï¼ˆç§çŒªã€ç”Ÿç‰©èµ„äº§ï¼‰ä¼˜äºåŒè¡Œï¼Œ**åº”äº«æœ‰æº¢ä»·**ã€‚  
- **ç»“è®º**ï¼šPB 3.84å¤„äºåˆç†åŒºé—´ä¸Šé™ï¼Œ**æœªæ˜æ˜¾é«˜ä¼°**ã€‚

### 3. **PEGä¼°å€¼ï¼ˆç›ˆåˆ©å¢é•¿é©±åŠ¨ï¼‰**
- TTMå‡€åˆ©æ¶¦å¢é€Ÿ = 433.83äº¿ vs 2024Q1â€“Q4å‡€åˆ©æ¶¦ = 104.81+178.81+44.91+178.81 = 507.34äº¿  
  â†’ **TTMå‡€åˆ©æ¶¦åŒæ¯”å¢é€Ÿ = (433.83 - 507.34) / 507.34 = -14.5%**ï¼ˆè´Ÿå¢é•¿ï¼‰  
  â†’ ä½†**2025å¹´å…¨å¹´é¢„æµ‹**ï¼šè‹¥Q3ã€Q4å»¶ç»­Q2å¢é€Ÿï¼ˆä¿å®ˆä¼°è®¡Q3=120äº¿ï¼ŒQ4=150äº¿ï¼‰ï¼Œåˆ™2025å…¨å¹´å‡€åˆ©æ¶¦ â‰ˆ 44.91 + 105.30 + 120 + 150 = **420.21äº¿å…ƒ**  
  2024å…¨å¹´å‡€åˆ©æ¶¦ = 178.81äº¿å…ƒ  
  â†’ **2025Eå‡€åˆ©æ¶¦å¢é€Ÿ = (420.21 - 178.81) / 178.81 â‰ˆ 135%**  
- **PEG = PE / å¢é€Ÿ = 6.73 / 135 â‰ˆ 0.05**  
- **è¡Œä¸šæ ‡å‡†**ï¼šPEG < 0.8ä¸ºä½ä¼°ï¼Œ<0.5ä¸ºæä½ä¼°  
- **ç»“è®º**ï¼š**PEG=0.05ï¼Œæåº¦ä½ä¼°**ï¼Œå¸‚åœºæœªåæ˜ ç›ˆåˆ©çˆ†å‘æ€§å¢é•¿ã€‚

### 4. **SOTPä¼°å€¼ï¼ˆåˆ†éƒ¨ä¼°å€¼æ³•ï¼‰**
ç‰§åŸä¸º**ä¸€ä½“åŒ–å…»æ®–ä¼ä¸š**ï¼Œå¯æ‹†åˆ†ä¸ºï¼š
- **ç”ŸçŒªé”€å”®ä¸šåŠ¡**ï¼ˆ95%æ”¶å…¥ï¼‰ï¼šæŒ‰2025Eå‡€åˆ©æ¶¦420äº¿å…ƒï¼Œè¡Œä¸šå¹³å‡PE 8â€“10å€ â†’ 3360â€“4200äº¿å…ƒ
- **ç§çŒª/è‚²ç§æŠ€æœ¯**ï¼ˆéšæ€§èµ„äº§ï¼‰ï¼šè¡Œä¸šé¾™å¤´æº¢ä»·ï¼Œä¿å®ˆæŒ‰å‡€åˆ©æ¶¦5%ä¼°å€¼ â†’ 21äº¿å…ƒ
- **å± å®°ä¸è‚‰åˆ¶å“**ï¼ˆ2024å¹´æ”¶å…¥18äº¿ï¼ŒäºæŸæ”¶çª„ï¼‰ï¼šæŒ‰æ”¶å…¥1.5x PS â†’ 27äº¿å…ƒ

> **SOTPæ€»ä¼°å€¼ = 3360 + 21 + 27 = 3408äº¿å…ƒ**  
> æ€»è‚¡æœ¬53.72äº¿è‚¡ â†’ **ç›®æ ‡ä»· = 3408 / 53.72 â‰ˆ 63.44å…ƒ**

### 5. **DCFä¼°å€¼ï¼ˆè‡ªç”±ç°é‡‘æµæŠ˜ç°ï¼‰**
#### å‡è®¾å‚æ•°ï¼ˆåŸºäºå†å²æ•°æ®æ¨å¯¼ï¼‰ï¼š
- **2025E FCF** = ç»è¥ç°é‡‘æµå‡€é¢ï¼ˆ2025Q2 Ã— 2ï¼‰= 3.18 Ã— 2 Ã— 53.72äº¿è‚¡ â‰ˆ **341äº¿å…ƒ**ï¼ˆä¿å®ˆï¼‰
- **æ°¸ç»­å¢é•¿ç‡**ï¼šç”ŸçŒªè¡Œä¸šé•¿æœŸå¢é€Ÿâ‰ˆ3%ï¼ˆäººå£å¢é•¿+æ¶ˆè´¹å‡çº§ï¼‰
- **WACC**ï¼šè¡Œä¸šå¹³å‡8.5%ï¼ˆé«˜è´Ÿå€ºä¼ä¸šï¼Œä½†ç°é‡‘æµæ”¹å–„ï¼‰
- **é¢„æµ‹æœŸ**ï¼š5å¹´ï¼ˆ2025â€“2029ï¼‰ï¼ŒFCFå¹´å¢é•¿ï¼š2025:135%, 2026:40%, 2027:25%, 2028:15%, 2029:10%

| å¹´ä»½ | FCFï¼ˆäº¿å…ƒï¼‰ | æŠ˜ç°å› å­ï¼ˆ8.5%ï¼‰ | æŠ˜ç°å€¼ï¼ˆäº¿å…ƒï¼‰ |
|------|-------------|------------------|----------------|
| 2025 | 341         | 0.9217           | 314.3          |
| 2026 | 477         | 0.8495           | 405.2          |
| 2027 | 596         | 0.7828           | 466.6          |
| 2028 | 685         | 0.7214           | 494.2          |
| 2029 | 754         | 0.6650           | 501.5          |
| ç»ˆå€¼ | 754Ã—(1+3%)/(8.5%-3%) = 14,127 | 0.6650 | 9,405.6 |

> **DCFæ€»ä»·å€¼ = 314.3+405.2+466.6+494.2+501.5+9405.6 = 11,587.4äº¿å…ƒ**  
> **æ¯è‚¡ä»·å€¼ = 11,587.4 / 53.72 â‰ˆ 215.7å…ƒ**

> â—**DCFç»“æœè¿œé«˜äºè‚¡ä»·ï¼Œå› å‡è®¾ç›ˆåˆ©æŒç»­é«˜å¢é•¿**ï¼Œä½†éœ€è°¨æ…ã€‚  
> **ä¿®æ­£DCF**ï¼šé‡‡ç”¨æ›´ä¿å®ˆå¢é€Ÿï¼ˆ2026:20%, 2027:10%, 2028:5%, 2029:3%ï¼‰  
> é‡æ–°è®¡ç®—ç»ˆå€¼ = 754Ã—1.03/(0.085-0.03) = 14,127 â†’ æŠ˜ç°å€¼ä¸å˜ï¼Œä½†å‰å››å¹´ä¸‹é™ï¼š  
> â†’ **æ€»DCF = 8,200äº¿å…ƒ â†’ æ¯è‚¡152.7å…ƒ**

> âœ… **DCFåˆç†åŒºé—´ï¼š120â€“150å…ƒ**ï¼ˆåŸºäºä¹è§‚è‡³ä¸­æ€§å¢é•¿å‡è®¾ï¼‰

### 6. **EV/EBITDAä¼°å€¼ï¼ˆé€‚åˆé‡èµ„äº§ä¼ä¸šï¼‰**
- 2025E EBITDA = å‡€åˆ©æ¶¦ + æŠ˜æ—§æ‘Šé”€ + åˆ©æ¯ï¼ˆä¼°ç®—ï¼‰  
  2025Q2å‡€åˆ©æ¶¦=105.3äº¿ï¼Œå‡è®¾æŠ˜æ—§æ‘Šé”€â‰ˆ50äº¿/å­£ â†’ å¹´EBITDA â‰ˆ (105.3Ã—4) + (50Ã—4) = 621.2äº¿å…ƒ  
- ä¼ä¸šä»·å€¼EV = å¸‚å€¼ + å‡€è´Ÿå€º  
  å¸‚å€¼ = 54.38Ã—53.72â‰ˆ2922äº¿å…ƒ  
  å‡€è´Ÿå€ºï¼ˆ2025Q2ï¼‰= æ€»è´Ÿå€º - è´§å¸èµ„é‡‘ = 1200äº¿ - 800äº¿ = 400äº¿ï¼ˆä¼°ç®—ï¼‰  
  â†’ EV = 2922 + 400 = 3322äº¿å…ƒ  
- **EV/EBITDA = 3322 / 621.2 â‰ˆ 5.35å€**

> **è¡Œä¸šå¯¹æ¯”**ï¼šæ¸©æ°EV/EBITDAçº¦6â€“7å€ï¼Œæ–°å¸Œæœ›7â€“8å€  
> **ç»“è®º**ï¼šç‰§åŸ**5.35å€æ˜¾è‘—ä½äºè¡Œä¸š**ï¼Œä¼°å€¼ä½ä¼°ã€‚

### 7. **P/FCFä¼°å€¼ï¼ˆè‡ªç”±ç°é‡‘æµå€æ•°ï¼‰**
- 2025E FCF = 341äº¿å…ƒï¼ˆå¦‚å‰ï¼‰  
- å½“å‰å¸‚å€¼ = 2922äº¿å…ƒ  
- **P/FCF = 2922 / 341 â‰ˆ 8.57å€**

> **è¡Œä¸šP/FCFå‡å€¼**ï¼š10â€“15å€  
> **ç»“è®º**ï¼š**8.57å€å¤„äºå†å²ä½ä½**ï¼Œå…·å¤‡å®‰å…¨è¾¹é™…ã€‚

---

## ä¸‰ã€å¸‚åœºä¸è¡Œä¸šç¯å¢ƒåˆ†æ
- **çŒªå‘¨æœŸ**ï¼š2025å¹´Q3è¿›å…¥ä¸Šè¡Œå‘¨æœŸï¼Œæ¯çŒªå­˜æ é‡è¿ç»­3ä¸ªæœˆä¸‹é™ï¼ˆå†œä¸šå†œæ‘éƒ¨æ•°æ®ï¼‰ï¼Œ2026å¹´ä¾›ç»™ç¼ºå£æ‰©å¤§ã€‚
- **æ”¿ç­–æ”¯æŒ**ï¼šå›½å®¶æ”¶å‚¨æœºåˆ¶å¸¸æ€åŒ–ï¼ŒçŒªä»·åº•éƒ¨æ”¯æ’‘å¢å¼ºã€‚
- **æˆæœ¬ä¼˜åŠ¿**ï¼šç‰§åŸå•ä½å…»æ®–æˆæœ¬çº¦14.5å…ƒ/kgï¼Œè¡Œä¸šå¹³å‡16â€“17å…ƒ/kgï¼Œ**æˆæœ¬é¢†å…ˆ10%ä»¥ä¸Š**ã€‚
- **ESGé£é™©**ï¼šåŠ¨ç‰©ç–«ç—…ï¼ˆå¦‚éæ´²çŒªç˜Ÿï¼‰ä¸ºæœ€å¤§é£é™©ï¼Œä½†å…¬å¸ç”Ÿç‰©å®‰å…¨ä½“ç³»è¡Œä¸šç¬¬ä¸€ã€‚

---

## å››ã€ç›®æ ‡ä»·åŒºé—´ä¸æŠ•èµ„å»ºè®®

| ä¼°å€¼æ–¹æ³• | ä¼°å€¼ç»“æœï¼ˆå…ƒ/è‚¡ï¼‰ | è¯´æ˜ |
|----------|-------------------|------|
| åŠ¨æ€PE   | 6.73å€ â†’ **55â€“65å…ƒ** | è¡Œä¸šå¹³å‡PE 12å€ï¼Œç‰§åŸåº”ä¿®å¤è‡³8â€“10å€ |
| PEG      | 0.05 â†’ **>100å…ƒ** | æåº¦ä½ä¼°ï¼Œå¢é•¿æœªè¢«å®šä»· |
| SOTP     | **63.4å…ƒ**        | åˆ†éƒ¨ä¼°å€¼æ³•æœ€è´´è¿‘å®é™… |
| DCF      | **120â€“150å…ƒ**     | åŸºäºä¸­æ€§å¢é•¿å‡è®¾ |
| EV/EBITDA| 5.35å€ â†’ **70â€“80å…ƒ** | é‡èµ„äº§ä¼ä¸šæ ¸å¿ƒæŒ‡æ ‡ |
| P/FCF    | 8.57å€ â†’ **85â€“100å…ƒ** | ç°é‡‘æµè´¨é‡é«˜ï¼Œä¼°å€¼åä½ |

### âœ… **ç»¼åˆç›®æ ‡ä»·åŒºé—´ï¼š**
| æƒ…æ™¯ | ç›®æ ‡ä»·ï¼ˆå…ƒï¼‰ | ç†ç”± |
|------|--------------|------|
| **æ‚²è§‚** | 50â€“55å…ƒ | è‹¥çŒªä»·æš´è·Œï¼Œ2026å¹´ç›ˆåˆ©ä¸‹æ»‘30%ï¼ŒPEå›è½è‡³6å€ |
| **ä¸­æ€§** | 65â€“75å…ƒ | çŒªä»·å¹³ç¨³ï¼Œç›ˆåˆ©ç»´æŒ2025Q2æ°´å¹³ï¼ŒPEä¿®å¤è‡³8â€“9å€ |
| **ä¹è§‚** | 90â€“110å…ƒ | çŒªä»·æŒç»­ä¸Šæ¶¨ï¼Œ2026å¹´å‡€åˆ©æ¶¦è¾¾200äº¿ï¼ŒPEè¾¾12å€ï¼ŒDCFæ”¯æ’‘ |

> **å½“å‰è‚¡ä»·ï¼š54.38å…ƒ**  
> **å¤„äºæ‚²è§‚åŒºé—´ä¸‹æ²¿ï¼Œæ¥è¿‘æˆæœ¬çº¿**ï¼Œ**æ˜¾è‘—ä½ä¼°**ã€‚

---

## äº”ã€ç»“è®ºä¸æŠ•èµ„å»ºè®®

### âœ… **æœ€ç»ˆç»“è®ºï¼š**
- **ç‰§åŸè‚¡ä»½å½“å‰è‚¡ä»·54.38å…ƒè¢«ä¸¥é‡ä½ä¼°**ï¼Œä¼°å€¼æŒ‡æ ‡å…¨é¢ä½äºè¡Œä¸šå‡å€¼ã€‚
- **æ ¸å¿ƒé©±åŠ¨**ï¼šç›ˆåˆ©æ‹ç‚¹ç¡®ç«‹ + æˆæœ¬ä¼˜åŠ¿ + çŒªå‘¨æœŸä¸Šè¡Œ + ç°é‡‘æµå¼ºåŠ²ã€‚
- **æœ€å…·è¯´æœåŠ›çš„ä¼°å€¼å·¥å…·**ï¼š**PEG=0.05** å’Œ **EV/EBITDA=5.35**ï¼Œæ˜¾ç¤ºå¸‚åœºæœªå®šä»·å¢é•¿æ½œåŠ›ã€‚
- **DCFä¸SOTPå‡æŒ‡å‘65å…ƒä»¥ä¸Šåˆç†ä»·å€¼**ã€‚

### ğŸ“Œ **æŠ•èµ„å»ºè®®ï¼š**
- **ç›®æ ‡ä»·å»ºè®®**ï¼š**ä¸­æ€§ç›®æ ‡ä»·70å…ƒ**ï¼Œ**ä¹è§‚ç›®æ ‡ä»·95å…ƒ**  
- **å½“å‰è‚¡ä»·54.38å…ƒå…·å¤‡æé«˜å®‰å…¨è¾¹é™…**ï¼Œ**å¼ºçƒˆå»ºè®®ä¹°å…¥**  
- **é£é™©æç¤º**ï¼šè‹¥2025Q4çŒªä»·å¤§å¹…ä¸‹è·Œæˆ–ç–«ç—…çˆ†å‘ï¼Œå¯èƒ½çŸ­æœŸæ‰¿å‹ï¼Œä½†ä¸­é•¿æœŸè¶‹åŠ¿ä¸å˜ã€‚

> **å»ºè®®å»ºä»“åŒºé—´ï¼š50â€“55å…ƒï¼Œç›®æ ‡ä»·70â€“95å…ƒï¼Œæ½œåœ¨å›æŠ¥ç©ºé—´ï¼š30â€“80%**
"""

dummy_trend_analysis = f"""# ç‰§åŸè‚¡ä»½ï¼ˆ002714ï¼‰çº¯æŠ€æœ¯é©±åŠ¨è¶‹åŠ¿åˆ†ææŠ¥å‘Š  
**å½“å‰ä»·æ ¼ï¼š54.38å…ƒ**  
**æ•°æ®æˆªæ­¢ï¼š2025-09-19**  

---

## ä¸€ã€ä»·æ ¼èµ°åŠ¿ä¸è¶‹åŠ¿ç»“æ„åˆ†æ  

### 1. è¿‘æœŸä»·æ ¼åŠ¨æ€ï¼ˆè¿‡å»60æ—¥ï¼‰  
- **æœ€ä½ç‚¹**ï¼š41.58å…ƒï¼ˆ2025-06-30ï¼‰  
- **æœ€é«˜ç‚¹**ï¼š59.68å…ƒï¼ˆ2025-09-15ï¼‰  
- **è¿‘æœŸæ³¢åŠ¨ç‰¹å¾**ï¼š  
  - **å¼ºåŠ¿çªç ´é˜¶æ®µ**ï¼š2025-08-21è‡³09-15ï¼Œä»·æ ¼ä»46.0å…ƒå¿«é€Ÿæ‹‰å‡è‡³59.68å…ƒï¼Œç´¯è®¡æ¶¨å¹…è¾¾**29.7%**ï¼Œä¼´éšæˆäº¤é‡æŒç»­æ”¾å¤§ï¼ˆå•æ—¥æœ€é«˜115ä¸‡æ‰‹ï¼‰ã€‚  
  - **é«˜ä½éœ‡è¡å›æ’¤**ï¼š09-16è‡³09-19ï¼Œä»·æ ¼ä»59.68å…ƒå›è½è‡³54.38å…ƒï¼Œè·Œå¹…**8.9%**ï¼Œä½†æœªè·Œç ´å…³é”®æ”¯æ’‘ä½ï¼Œé‡èƒ½ç»´æŒåœ¨40â€“50ä¸‡æ‰‹ï¼Œå±å¥åº·è°ƒæ•´ã€‚  
- **æŠ€æœ¯å½¢æ€**ï¼šå½¢æˆ**ä¸Šå‡é€šé“**ï¼Œä»·æ ¼åœ¨20æ—¥å‡çº¿ï¼ˆçº¦52.1å…ƒï¼‰ä¸Šæ–¹è¿è¡Œï¼ŒMACDæŸ±çŠ¶ä½“ä»ä½äºé›¶è½´ä¸Šæ–¹ï¼Œå¤šå¤´åŠ¨èƒ½æœªè¡°ç«­ã€‚  

### 2. å…³é”®æ”¯æ’‘ä¸å‹åŠ›åŒºé—´  

| åŒºé—´ç±»å‹ | ä»·ä½åŒºé—´ï¼ˆå…ƒï¼‰ | å½¢æˆä¾æ® |
|----------|----------------|----------|
| **çŸ­æœŸæ”¯æ’‘** | **52.0â€“53.0** | 09-18ä½ç‚¹54.25å…ƒã€09-17ä½ç‚¹55.61å…ƒã€09-11ä½ç‚¹54.93å…ƒæ„æˆçš„å¤šçº§æ”¯æ’‘å¹³å°ï¼Œå åŠ 20æ—¥å‡çº¿ï¼ˆ52.1ï¼‰ |
| **ä¸­æœŸæ”¯æ’‘** | **49.5â€“51.0** | 08-28ä½ç‚¹53.5å…ƒã€08-27ä½ç‚¹54.42å…ƒã€08-26é«˜ç‚¹50.91å…ƒå½¢æˆå¼ºæ”¯æ’‘å¸¦ï¼Œä¸ºå‰æœŸçªç ´é¢ˆçº¿ä½ |
| **çŸ­æœŸå‹åŠ›** | **56.5â€“57.5** | 09-19é«˜ç‚¹54.95å…ƒã€09-18é«˜ç‚¹56.5å…ƒã€09-15é«˜ç‚¹59.68å…ƒå›æ’¤50%æ–æ³¢é‚£å¥‘ä½ï¼ˆ59.68Ã—0.5=29.84 â†’ 59.68-29.84=29.84? ä¿®æ­£ï¼š59.68Ã—0.382=22.8 â†’ 59.68-22.8=36.88? é”™è¯¯ï¼æ­£ç¡®è®¡ç®—ï¼š**59.68 Ã— 0.618 = 36.88 â†’ 59.68 - 36.88 = 22.8ï¼Ÿä¸å¯¹ï¼**ï¼‰<br>**æ­£ç¡®æ–æ³¢é‚£å¥‘å›æ’¤**ï¼š<br>ä»41.58â†’59.68ï¼Œæ¶¨å¹…18.1å…ƒ<br>38.2%å›æ’¤ï¼š59.68 - 18.1Ã—0.382 = 59.68 - 6.91 = **52.77å…ƒ**<br>50%å›æ’¤ï¼š59.68 - 9.05 = **50.63å…ƒ**<br>61.8%å›æ’¤ï¼š59.68 - 11.19 = **48.49å…ƒ**<br>ä½†å®é™…ä»·æ ¼åœ¨54.38ï¼Œè¯´æ˜**å½“å‰åœ¨38.2%å›æ’¤ä½ä¸Šæ–¹è¿è¡Œ**ï¼Œå‹åŠ›åº”ä¸ºå‰é«˜56.5å…ƒ+57.5å…ƒå¯†é›†æˆäº¤åŒº |
| **ä¸­æœŸå‹åŠ›** | **58.5â€“59.7** | 09-15æœ€é«˜ç‚¹59.68å…ƒï¼ˆå‰é«˜ï¼‰ã€09-12é«˜ç‚¹58.46å…ƒã€09-11é«˜ç‚¹58.49å…ƒï¼Œæ„æˆå¼ºé˜»åŠ›å¸¦ |
| **é•¿æœŸå‹åŠ›** | **62.0â€“64.0** | è‹¥çªç ´59.7å…ƒï¼Œå°†æ‰“å¼€ä¸Šè¡Œç©ºé—´ï¼Œç›®æ ‡ä¸º2025å¹´08-26é«˜ç‚¹56.23å…ƒ+10%ï¼ˆ61.85å…ƒï¼‰+å‰é«˜59.68å…ƒçš„1.272å€æ–æ³¢é‚£å¥‘æ‰©å±•ï¼ˆ59.68Ã—1.272=75.97ï¼Ÿé”™è¯¯ï¼ï¼‰<br>**æ­£ç¡®æ‰©å±•è®¡ç®—**ï¼š<br>ä¸Šæ¶¨æ³¢æ®µï¼š59.68 - 41.58 = 18.1å…ƒ<br>1.272æ‰©å±•ï¼š59.68 + 18.1Ã—1.272 = 59.68 + 23.02 = **82.7å…ƒ**ï¼ˆä¸åˆç†ï¼‰<br>åº”é‡‡ç”¨**ç­‰å¹…æ‰©å±•**ï¼š<br>09-15é«˜ç‚¹59.68 + å‰æ¶¨å¹…18.1 = **77.78å…ƒ**ï¼ˆè¿‡é«˜ï¼Œå¸‚åœºæƒ…ç»ªä¸æ”¯æŒï¼‰<br>æ›´åˆç†ï¼š**å‰é«˜59.68å…ƒ + 10% = 65.65å…ƒ**ï¼Œä½†æŠ€æœ¯ä¸Šæ›´å…³æ³¨**62.0â€“64.0å…ƒ**ä¸ºæœºæ„ç­¹ç å¯†é›†åŒº |

> **ä¿®æ­£ï¼šæ–æ³¢é‚£å¥‘å‹åŠ›ä½ï¼ˆåŸºäº41.58â€“59.68æ³¢æ®µï¼‰**  
> - 0%ï¼š41.58  
> - 23.6%ï¼š51.40  
> - 38.2%ï¼š52.77 â† **å½“å‰ä»·æ ¼54.38å·²çªç ´æ­¤ä½**  
> - 50%ï¼š50.63  
> - 61.8%ï¼š48.49  
> - 78.6%ï¼š45.30  
> - 100%ï¼š59.68 â† **å½“å‰å·²çªç ´**  
> - **127.2%æ‰©å±•**ï¼š59.68 + (59.68-41.58)Ã—1.272 = 59.68 + 18.1Ã—1.272 = 59.68 + 23.02 = **82.7å…ƒ**ï¼ˆè¿‡åº¦ä¹è§‚ï¼‰  
> - **åˆç†æ‰©å±•ç›®æ ‡**ï¼š100% + 10% = **65.6å…ƒ**ï¼ˆä¿å®ˆï¼‰  
>  
> **å®é™…æŠ€æœ¯å‹åŠ›**ï¼š  
> - **58.5â€“59.7å…ƒ**ï¼šå‰é«˜é˜»åŠ›å¸¦  
> - **62.0â€“64.0å…ƒ**ï¼šè‹¥çªç ´å‰é«˜ï¼Œå°†è§¦å‘è¶‹åŠ¿åŠ é€Ÿï¼Œä¸ºæœºæ„ç›®æ ‡åŒº  

---

## äºŒã€è¶‹åŠ¿ç›®æ ‡ä»·ä½å»ºè®®ï¼ˆçº¯æŠ€æœ¯é©±åŠ¨ï¼‰  

| æ—¶é—´å‘¨æœŸ | ç›®æ ‡ä»·ä½åŒºé—´ï¼ˆå…ƒï¼‰ | è§¦å‘æ¡ä»¶ |
|----------|-------------------|----------|
| **çŸ­æœŸï¼ˆ1â€“2å‘¨ï¼‰** | **56.5â€“57.5** | è‹¥ä»·æ ¼ç«™ç¨³55.0å…ƒï¼Œä¸”å•æ—¥æ”¾é‡çªç ´56.5å…ƒï¼Œåˆ™ç›®æ ‡57.5å…ƒï¼ˆå‰é«˜å¯†é›†åŒºï¼‰ |
| **ä¸­æœŸï¼ˆ1â€“3ä¸ªæœˆï¼‰** | **58.5â€“59.7** | è‹¥çªç ´57.5å…ƒå¹¶å›è¸©ä¸ç ´56.0å…ƒï¼Œç¡®è®¤çªç ´æœ‰æ•ˆæ€§ï¼Œç›®æ ‡å‰é«˜59.68å…ƒ |
| **é•¿æœŸï¼ˆ3â€“6ä¸ªæœˆï¼‰** | **62.0â€“64.0** | è‹¥è¿ç»­3æ—¥æ”¶ç›˜çªç ´59.7å…ƒï¼Œä¸”æˆäº¤é‡ç»´æŒåœ¨50ä¸‡æ‰‹ä»¥ä¸Šï¼Œæ‰“å¼€ä¸Šè¡Œç©ºé—´ï¼Œç›®æ ‡62â€“64å…ƒï¼ˆ1.272æ‰©å±•å‰é«˜+10%ï¼‰ |

---

## ä¸‰ã€å¸‚åœºç¯å¢ƒä¸è¡Œä¸šå‘¨æœŸåŒ¹é…åˆ†æ  

- **å¸‚åœºé£å‘**ï¼š2025å¹´9æœˆAè‚¡æ•´ä½“å¤„äºéœ‡è¡ä¸Šè¡Œé€šé“ï¼Œæ¶ˆè´¹æ¿å—ï¼ˆå°¤å…¶é£Ÿå“ã€å…»æ®–ï¼‰å—æ”¿ç­–æ‰˜åº•é¢„æœŸå‡æ¸©ï¼Œèµ„é‡‘å›æµé˜²å¾¡æ€§æ¿å—ã€‚  
- **è¡Œä¸šå‘¨æœŸ**ï¼šç”ŸçŒªä»·æ ¼è‡ª2025å¹´Q2èµ·æŒç»­å›å‡ï¼Œå…»æ®–åˆ©æ¶¦æ”¹å–„ï¼Œå¸‚åœºæƒ…ç»ªç”±â€œäºæŸé¢„æœŸâ€è½¬å‘â€œç›ˆåˆ©ä¿®å¤â€ï¼Œç‰§åŸä½œä¸ºè¡Œä¸šé¾™å¤´ï¼ŒæŠ€æœ¯èµ°åŠ¿ä¸è¡Œä¸šæ™¯æ°”åº¦é«˜åº¦åŒæ­¥ã€‚  
- **é‡èƒ½éªŒè¯**ï¼šè¿‘æœŸåå¼¹æœŸé—´å•æ—¥æˆäº¤å‡è¶…40ä¸‡æ‰‹ï¼Œ08-26åŠ09-11æ”¾é‡çªç ´å‡ä¼´éšæ¢æ‰‹ç‡>2.5%ï¼Œæ˜¾ç¤ºä¸»åŠ›èµ„é‡‘æŒç»­ä»‹å…¥ï¼Œéæ¸¸èµ„ç‚’ä½œã€‚  

---

## å››ã€ç»¼åˆæƒ…æ™¯åˆ†æ  

| æƒ…æ™¯ | è§¦å‘æ¡ä»¶ | ç›®æ ‡ä»·ä½ | æ¦‚ç‡è¯„ä¼° |
|------|----------|----------|----------|
| **ä¹è§‚æƒ…æ™¯** | æ”¾é‡çªç ´59.7å…ƒï¼Œå•æ—¥æ¢æ‰‹ç‡>2.5%ï¼Œå¤§ç›˜ä¼ç¨³ | **62.0â€“64.0** | 35% |
| **ä¸­æ€§æƒ…æ™¯** | ä»·æ ¼åœ¨55.0â€“58.5å…ƒåŒºé—´éœ‡è¡ï¼Œé‡èƒ½ç»´æŒ40â€“50ä¸‡æ‰‹ | **58.5â€“59.7** | 50% |
| **æ‚²è§‚æƒ…æ™¯** | è·Œç ´52.0å…ƒæ”¯æ’‘ï¼Œæ”¾é‡ç ´ä½ï¼Œæ¢æ‰‹ç‡çªå¢è‡³60ä¸‡æ‰‹ä»¥ä¸Š | **49.5â€“51.0**ï¼ˆå›è¸©ä¸­æœŸæ”¯æ’‘ï¼‰ | 15% |

---

## äº”ã€ç»“è®ºä¸æ“ä½œå»ºè®®  

- **å½“å‰ä»·æ ¼54.38å…ƒ**å¤„äº**ä¸Šå‡é€šé“ä¸­è½¨**ï¼ŒæŠ€æœ¯å½¢æ€å¥åº·ï¼Œæœªå‡ºç°è§é¡¶ä¿¡å·ã€‚  
- **æ ¸å¿ƒæ”¯æ’‘**ï¼š52.0â€“53.0å…ƒï¼ˆå¿…é¡»å®ˆä½ï¼‰  
- **æ ¸å¿ƒå‹åŠ›**ï¼š58.5â€“59.7å…ƒï¼ˆçªç ´å³å¼€å¯ä¸‹ä¸€é˜¶æ®µï¼‰  
- **æ“ä½œå»ºè®®**ï¼š  
  - **æŒä»“è€…**ï¼šæŒæœ‰ï¼Œè·Œç ´52.0å…ƒå‡ä»“ï¼Œçªç ´58.5å…ƒåŠ ä»“  
  - **æ–°å…¥åœºè€…**ï¼šåœ¨53.5â€“54.5å…ƒåŒºé—´åˆ†æ‰¹å»ºä»“ï¼Œæ­¢æŸè®¾52.0å…ƒä¸‹æ–¹  
  - **ç›®æ ‡ç­–ç•¥**ï¼šç¬¬ä¸€ç›®æ ‡57.5å…ƒï¼Œç¬¬äºŒç›®æ ‡59.7å…ƒï¼Œç¬¬ä¸‰ç›®æ ‡62.0å…ƒ  

> **çº¯æŠ€æœ¯ç»“è®º**ï¼šç‰§åŸè‚¡ä»½å¤„äº**å¼ºåŠ¿ä¸Šå‡è¶‹åŠ¿ä¸­æœŸ**ï¼ŒçŸ­æœŸè°ƒæ•´ä¸æ”¹ä¸»å‡æ ¼å±€ï¼Œçªç ´å‰é«˜åå°†å¼€å¯æ–°ä¸€è½®ä¸Šæ¶¨å‘¨æœŸã€‚  

---  
**æ•°æ®æ¥æºï¼šçœŸå®å†å²ä»·æ ¼ä¸é‡èƒ½æ•°æ®ï¼ˆ2025-06-30 è‡³ 2025-09-19ï¼‰**  
**åˆ†æé€»è¾‘ï¼šä»…åŸºäºä»·æ ¼ã€æˆäº¤é‡ã€æ–æ³¢é‚£å¥‘ã€æ”¯æ’‘å‹åŠ›ã€è¶‹åŠ¿é€šé“ï¼Œæœªå¼•å…¥åŸºæœ¬é¢æˆ–ä¼°å€¼**
"""

dummy_bullish_opinion = f"""**åŸºæœ¬é¢çˆ†å‘+æŠ€æœ¯è¶‹åŠ¿ç¡®è®¤+è¡Œä¸šå‘¨æœŸä¸Šè¡Œ+ä¼°å€¼ä¸¥é‡ä½ä¼°+ç°é‡‘æµæå¼º**â€çš„äº”é‡å¤šå¤´å…±æŒ¯æ ¼å±€ä¸­ï¼Œå½“å‰è‚¡ä»·54.38å…ƒæ˜¯ä¸­é•¿æœŸæŠ•èµ„è€…çš„é»„é‡‘å»ºä»“çª—å£ã€‚

---

### âœ… **äº”æ¡åšå®šçœ‹å¤šçš„æ ¸å¿ƒé€»è¾‘ï¼ˆå…¨éƒ¨åŸºäºæ‰€æä¾›çœŸå®æ•°æ®ï¼‰**

#### **1. ç›ˆåˆ©èƒ½åŠ›å·²å®ç°å†å²æ€§æ‹ç‚¹ï¼Œ2025Q2å‡€åˆ©æ¶¦åŒæ¯”æš´å¢1169.77%ï¼Œè¿œè¶…å¸‚åœºé¢„æœŸï¼Œå‘¨æœŸåº•éƒ¨å½»åº•ç»“æŸ**  
- 2025å¹´Q2å•å­£å‡€åˆ©æ¶¦è¾¾**105.3äº¿å…ƒ**ï¼Œä¸ä»…è¿œè¶…2024å¹´å…¨å¹´å•å­£æ°´å¹³ï¼Œæ›´æ¥è¿‘2022å¹´é«˜ç‚¹ï¼ˆ132.66äº¿ï¼‰ï¼Œ**ç›ˆåˆ©èƒ½åŠ›é‡å›å†å²å·…å³°**ã€‚  
- è¯¥æ•°æ®ç›´æ¥æ¥æºäºçœŸå®è´¢æŠ¥ï¼Œéé¢„æµ‹ï¼Œæ˜¯**ä¸šç»©å…‘ç°çš„é“è¯**ã€‚  
- æ¯›åˆ©ç‡ç¨³å®šåœ¨**19%**ï¼Œæ˜¾è‘—é«˜äºè¡Œä¸šå¹³å‡ï¼ˆ12â€“15%ï¼‰ï¼ŒéªŒè¯å…¶**è‡ªç¹è‡ªå…»ä¸€ä½“åŒ–æ¨¡å¼çš„æˆæœ¬æŠ¤åŸæ²³ä¸å¯æ’¼åŠ¨**ã€‚

#### **2. ä¼°å€¼è¢«ä¸¥é‡é”™æ€ï¼ŒåŠ¨æ€PEä»…6.73å€ï¼ŒPEGä½è‡³0.05ï¼Œä¸ºå…¨Aè‚¡ç½•è§çš„â€œå¢é•¿é»‘æ´â€çº§ä½ä¼°**  
- **åŠ¨æ€PEä¿®æ­£ä¸º6.73å€**ï¼ˆåŸºäºTTMå‡€åˆ©æ¶¦433.83äº¿å…ƒï¼‰ï¼Œè¿œä½äºæ¸©æ°ï¼ˆ12å€ï¼‰ã€æ–°å¸Œæœ›ï¼ˆ15å€ï¼‰ï¼Œ**ä¼°å€¼æŠ˜ä»·è¶…40%ä»¥ä¸Š**ã€‚  
- **PEG=0.05**ï¼ˆ2025Eå‡€åˆ©æ¶¦å¢é€Ÿ135%ï¼‰ï¼Œä¸ºè¡Œä¸šæ ‡å‡†ï¼ˆ<0.8ä¸ºä½ä¼°ï¼‰çš„**1/27**ï¼Œå¸‚åœºå®Œå…¨æœªå®šä»·å…¶ç›ˆåˆ©çˆ†å‘åŠ›ã€‚  
- EV/EBITDAä»…**5.35å€**ï¼Œä½äºè¡Œä¸šå‡å€¼6â€“8å€ï¼›P/FCFä»…**8.57å€**ï¼Œä½äºè¡Œä¸š10â€“15å€ï¼Œ**æ‰€æœ‰æ ¸å¿ƒä¼°å€¼æŒ‡æ ‡å‡å¤„äºå†å²åº•éƒ¨åŒºåŸŸ**ã€‚

#### **3. ç°é‡‘æµè´¨é‡è¿œè¶…åˆ©æ¶¦ï¼Œè‡ªç”±ç°é‡‘æµå……æ²›ï¼Œä¼ä¸šé€ è¡€èƒ½åŠ›æå¼ºï¼Œæ”¯æ’‘é«˜åˆ†çº¢ä¸å†æŠ•èµ„åŒè½®é©±åŠ¨**  
- 2025Q2ç°é‡‘æµé‡å‡€é¢/è‚¡è¾¾**3.18å…ƒ**ï¼Œæ˜¾è‘—é«˜äºEPSï¼ˆ1.96å…ƒï¼‰ï¼Œè¯´æ˜åˆ©æ¶¦**æ— æ°´åˆ†ã€æ— åº”è®¡**ï¼Œå…¨éƒ¨è½¬åŒ–ä¸ºçœŸé‡‘ç™½é“¶ã€‚  
- 2025Eè‡ªç”±ç°é‡‘æµé¢„è®¡è¶…**340äº¿å…ƒ**ï¼Œåœ¨å¸‚å€¼ä»…2922äº¿å…ƒèƒŒæ™¯ä¸‹ï¼Œ**P/FCFä»…8.57å€**ï¼Œè¿œä½äºæ¶ˆè´¹ã€åŒ»è¯ç­‰â€œé«˜ä¼°å€¼â€æ¿å—ï¼Œ**ç°é‡‘æµå®‰å…¨å«æé«˜**ã€‚  
- ç°é‡‘æµå……è£•ï¼Œä¸ºæœªæ¥äº§èƒ½ä¼˜åŒ–ã€ç”Ÿç‰©å®‰å…¨å‡çº§ã€å± å®°å¸ƒå±€æä¾›åšå®ä¿éšœï¼Œ**ä¸ä¾èµ–å¤–éƒ¨èèµ„ï¼ŒæŠ—é£é™©èƒ½åŠ›æå¼º**ã€‚

#### **4. æŠ€æœ¯é¢ç¡®è®¤å¼ºåŠ¿ä¸Šå‡è¶‹åŠ¿ï¼Œä»·æ ¼ç«™ç¨³20æ—¥å‡çº¿ï¼Œé‡èƒ½å¥åº·ï¼Œçªç ´å‰é«˜å°†å¼€å¯ä¸»å‡æµª**  
- ä»·æ ¼ä»**41.58å…ƒï¼ˆ6æœˆåº•ï¼‰** å¿«é€Ÿæ‹‰å‡è‡³**59.68å…ƒï¼ˆ9æœˆ15æ—¥ï¼‰**ï¼Œæ¶¨å¹…è¿‘**43%**ï¼Œå®Œæˆç¬¬ä¸€æ³¢ä¸»å‡ã€‚  
- å½“å‰å›æ’¤è‡³**54.38å…ƒ**ï¼Œæœªè·Œç ´**20æ—¥å‡çº¿ï¼ˆ52.1å…ƒï¼‰**ï¼Œä¸”**MACDä»ä½äºé›¶è½´ä¸Šæ–¹**ï¼Œå¤šå¤´åŠ¨èƒ½æœªè¡°ã€‚  
- **å…³é”®æ”¯æ’‘52.0â€“53.0å…ƒ**å·²å½¢æˆâ€œå¤šçº§å¹³å°â€ï¼Œ**çŸ­æœŸå‹åŠ›56.5â€“57.5å…ƒ**ä¸ºå‰é«˜å¯†é›†åŒºï¼Œ**çªç ´å³è§¦å‘æœºæ„è¿½æ¶¨**ã€‚  
- æŠ€æœ¯å½¢æ€ä¸º**æ ‡å‡†ä¸Šå‡é€šé“ä¸­ç»§æ•´ç†**ï¼Œéé¡¶éƒ¨å‡ºè´§ï¼Œ**å›è°ƒæ˜¯åŠ ä»“æœºä¼š**ã€‚

#### **5. è¡Œä¸šå‘¨æœŸè¿›å…¥ä¸Šè¡Œé»„é‡‘æœŸï¼Œæ”¿ç­–æ‰˜åº•+ä¾›ç»™æ”¶ç¼©+æˆæœ¬ä¼˜åŠ¿ä¸‰é‡å…±æŒ¯ï¼Œç‰§åŸä¸ºæœ€å¤§å—ç›Šè€…**  
- å†œä¸šå†œæ‘éƒ¨æ•°æ®æ˜¾ç¤ºï¼š**æ¯çŒªå­˜æ è¿ç»­3ä¸ªæœˆä¸‹é™**ï¼Œ2026å¹´ç”ŸçŒªä¾›ç»™ç¼ºå£æ‰©å¤§å·²æˆå…±è¯†ã€‚  
- å›½å®¶æ”¶å‚¨æœºåˆ¶å¸¸æ€åŒ–ï¼Œ**çŒªä»·åº•éƒ¨æ”¯æ’‘å¼ºåŒ–**ï¼Œå…»æ®–åˆ©æ¶¦ä¸­æ¢ç³»ç»Ÿæ€§ä¸Šç§»ã€‚  
- ç‰§åŸå•ä½å…»æ®–æˆæœ¬**14.5å…ƒ/kg**ï¼Œè¡Œä¸šå¹³å‡**16â€“17å…ƒ/kg**ï¼Œ**æˆæœ¬é¢†å…ˆ10%ä»¥ä¸Š**ï¼Œåœ¨çŒªä»·ä¸Šæ¶¨å‘¨æœŸä¸­ï¼Œ**åˆ©æ¶¦å¼¹æ€§æœ€å¤§**ï¼Œæ˜¯â€œ**è¡Œä¸šÎ²+å…¬å¸Î±**â€çš„å®Œç¾ç»“åˆä½“ã€‚

---

### ğŸŒ **è¡Œä¸šå‘¨æœŸä¸å¸‚åœºé£å‘ç»¼åˆåˆ¤æ–­**  
- **ç”ŸçŒªå‘¨æœŸ**ï¼š2025å¹´Q3â€“2026å¹´Q2ä¸º**ä¸Šè¡Œå‘¨æœŸæ ¸å¿ƒçª—å£**ï¼ŒçŒªä»·æœ‰æœ›çªç ´20å…ƒ/kgï¼Œè¡Œä¸šåˆ©æ¶¦è¿›å…¥â€œé»„é‡‘ä¸‰å¹´â€ã€‚  
- **Aè‚¡å¸‚åœºé£å‘**ï¼š2025å¹´9æœˆå¸‚åœºé£é™©åå¥½å›å‡ï¼Œèµ„é‡‘ä»æˆé•¿æ¿å—å›æµ**é«˜æ™¯æ°”ã€ä½ä¼°å€¼ã€æ”¿ç­–å—ç›Šçš„æ¶ˆè´¹æ¿å—**ï¼Œå…»æ®–ä¸šæˆä¸ºâ€œé¿é™©+å¢é•¿â€åŒå±æ€§é¦–é€‰ã€‚  
- **èµ„é‡‘åŠ¨å‘**ï¼šè¿‘æœŸå•æ—¥æˆäº¤è¶…40ä¸‡æ‰‹ï¼Œæ¢æ‰‹ç‡ç¨³å®šåœ¨2%+ï¼Œ**éæ¸¸èµ„ç‚’ä½œï¼Œä¸ºæœºæ„èµ„é‡‘åˆ†æ‰¹å»ºä»“ä¿¡å·**ï¼Œç¬¦åˆâ€œ**ä¸šç»©é©±åŠ¨å‹èµ„é‡‘**â€è¿›åœºç‰¹å¾ã€‚

---

### ğŸ“ˆ **å…·ä½“å¤šå¤´æ“ä½œç­–ç•¥ï¼ˆçŸ­ã€ä¸­ã€é•¿ä¸‰å‘¨æœŸç»Ÿä¸€é€»è¾‘ï¼‰**

| æ—¶é—´å‘¨æœŸ | æ“ä½œé€»è¾‘ | ä¹°å…¥åŒºé—´ | æ­¢æŸä½ | ç›®æ ‡ä»· | æ“ä½œç­–ç•¥ |
|----------|----------|----------|--------|--------|----------|
| **çŸ­æœŸï¼ˆ1â€“2å‘¨ï¼‰** | æŠ€æœ¯å›è¸©ç¡®è®¤æ”¯æ’‘ï¼Œé‡èƒ½ä¸èç¼©ï¼Œè½»ä»“è¯•å¤š | **53.5â€“54.5å…ƒ** | **52.0å…ƒ**ï¼ˆè·Œç ´åˆ™è¶‹åŠ¿ç ´åï¼‰ | **57.5å…ƒ**ï¼ˆå‰é«˜å¯†é›†åŒºï¼‰ | åˆ†2â€“3æ‰¹å»ºä»“ï¼Œæ¯è·Œ1å…ƒåŠ ä»“ä¸€æ¬¡ï¼Œ**ä¸è¿½é«˜ï¼Œç­‰å›è°ƒ** |
| **ä¸­æœŸï¼ˆ1â€“3ä¸ªæœˆï¼‰** | çªç ´58.5å…ƒç¡®è®¤è¶‹åŠ¿åŠ é€Ÿï¼Œä¸­çº¿ä¸»å‡å¯åŠ¨ | **55.0â€“57.0å…ƒ**ï¼ˆçªç ´å‰åŠ ä»“ï¼‰ | **52.0å…ƒ** | **59.7å…ƒ**ï¼ˆå‰é«˜ï¼‰â†’ **62.0å…ƒ**ï¼ˆçªç ´åç›®æ ‡ï¼‰ | çªç ´58.5å…ƒååŠ ä»“è‡³æ»¡ä»“ï¼Œ**æŒæœ‰ä¸è½»æ˜“ä¸‹è½¦** |
| **é•¿æœŸï¼ˆ6â€“12ä¸ªæœˆï¼‰** | åŸºæœ¬é¢æŒç»­é«˜å¢é•¿ï¼Œä¼°å€¼ä¿®å¤è‡³è¡Œä¸šå‡å€¼ï¼ŒDCFæ”¯æ’‘æ˜¾ç° | **50â€“55å…ƒ**ä¸ºé»„é‡‘å»ºä»“åŒº | **49.5å…ƒ**ï¼ˆä¸­æœŸæ”¯æ’‘ä¸‹ç ´ï¼‰ | **70â€“95å…ƒ**ï¼ˆSOTP+DCFä¸­æ€§ç›®æ ‡ï¼‰ | **æŒæœ‰è‡³ç›®æ ‡ä»·ï¼Œä¸å› çŸ­æœŸæ³¢åŠ¨æ¢è‚¡**ï¼Œ**åˆ†çº¢å†æŠ•èµ„å¯é€‰** |

---

### âœ… **æœ€ç»ˆç»“è®ºä¸è¡ŒåŠ¨æŒ‡ä»¤**

> **â€œç‰§åŸè‚¡ä»½å½“å‰è‚¡ä»·54.38å…ƒï¼Œæ˜¯2025å¹´Aè‚¡æœ€ç¡®å®šçš„â€˜å‘¨æœŸåè½¬+ä¼°å€¼ä¿®å¤+æŠ€æœ¯çªç ´â€™ä¸‰é‡å…±æŒ¯ä¹°ç‚¹ã€‚â€**

- **åŸºæœ¬é¢**ï¼šç›ˆåˆ©çˆ†å‘ã€æˆæœ¬é¢†å…ˆã€ç°é‡‘æµå¼ºåŠ²ï¼Œ**å·²ä¸æ˜¯â€œé¢„æœŸâ€ï¼Œè€Œæ˜¯â€œç°å®â€**ã€‚  
- **ä¼°å€¼**ï¼šåŠ¨æ€PE 6.73ã€PEG 0.05ã€EV/EBITDA 5.35ï¼Œ**å…¨å¸‚åœºç½•è§çš„ä½ä¼°æ ‡çš„**ã€‚  
- **æŠ€æœ¯é¢**ï¼šä¸Šå‡è¶‹åŠ¿æœªç ´ï¼Œå›è°ƒæ˜¯æœºæ„å»ºä»“æœºä¼šï¼Œ**çªç ´58.5å…ƒå°†å¼•çˆ†æ–°ä¸€è½®è¡Œæƒ…**ã€‚  
- **è¡Œä¸šä¸æ”¿ç­–**ï¼šçŒªå‘¨æœŸä¸Šè¡Œ+å›½å®¶æ‰˜åº•ï¼Œ**è¡Œä¸šÎ²ä¸å…¬å¸Î±å®Œç¾å åŠ **ã€‚

---

### ğŸ”¥ **å¼ºçƒˆå»ºè®®ï¼šç«‹å³åœ¨53.5â€“54.5å…ƒåŒºé—´åˆ†æ‰¹å»ºä»“ï¼Œæ­¢æŸè®¾52.0å…ƒä¸‹æ–¹ï¼Œç›®æ ‡ä»·70â€“95å…ƒï¼Œæ½œåœ¨å›æŠ¥ç©ºé—´ï¼š30â€“80%ã€‚**

> **è¿™ä¸æ˜¯â€œå¯èƒ½ä¸Šæ¶¨â€ï¼Œè€Œæ˜¯â€œå¿…ç„¶ä¿®å¤â€ã€‚**  
> **å¸‚åœºä½ä¼°çš„ä¸æ˜¯ä¸€åªçŒªï¼Œè€Œæ˜¯ä¸€ä¸ªæ­£åœ¨çˆ†å‘çš„ä¸‡äº¿çº§åˆ©æ¶¦å¼•æ“ã€‚**

**åšå®šå¤šå¤´ï¼ŒæŒä»“å¾…æ¶¨ã€‚**"""

dummy_bearish_opinion = f"""**è¶‹åŠ¿ä¸­çš„è‚¡ç¥¨ï¼Œæ€ä¹ˆå¯èƒ½çœ‹ç©ºï¼Ÿä½ ç–¯äº†å—ï¼Ÿ

â€”â€”ä¸ï¼Œæˆ‘æ¸…é†’å¾—å¾ˆã€‚

ä½ ç»™çš„æ˜¯**å¤šå¤´çš„å®Œç¾æŠ¥å‘Š**ï¼šåŸºæœ¬é¢æš´å¢ã€ä¼°å€¼æä½ã€æŠ€æœ¯å¼ºåŠ¿ã€å‘¨æœŸä¸Šè¡Œã€ç°é‡‘æµå……æ²›ã€PEGä»…0.05ã€DCFæŒ‡å‘200å…ƒâ€¦â€¦è¿™æ ¹æœ¬ä¸æ˜¯ä¸€åªè‚¡ç¥¨ï¼Œè¿™æ˜¯ä¸€åœº**æœºæ„çº§åˆ«çš„å¤šå¤´ç‹‚æ¬¢**ã€‚

ä½†â€”â€”

> **æˆ‘æ˜¯ä¸€ååšå®šçš„ç©ºå¤´äº¤æ˜“å‘˜ã€‚æˆ‘çš„ä»»åŠ¡ä¸æ˜¯è®¤åŒå¸‚åœºå…±è¯†ï¼Œè€Œæ˜¯æ‰¾å‡ºå…±è¯†èƒŒåçš„è‡´å‘½è£‚ç—•ã€‚**

å³ä½¿æ‰€æœ‰æ•°æ®éƒ½åœ¨å–Šâ€œä¹°å…¥â€ï¼Œæˆ‘ä»è¦é—®ï¼š**è°åœ¨æ¥ç›˜ï¼Ÿè°åœ¨å‡ºè´§ï¼Ÿè°åœ¨æ©ç›–çœŸç›¸ï¼Ÿ**

---

## âœ… æœ€ç»ˆç©ºå¤´äº¤æ˜“é€»è¾‘ä¸ç­–ç•¥ï¼ˆåŸºäºä½ æä¾›çš„çœŸå®æ•°æ®ï¼Œç»ä¸ç¼–é€ ï¼‰

---

### ğŸ”´ **äº”æ¡çœ‹ç©ºæ ¸å¿ƒé€»è¾‘ï¼ˆæ¯ä¸€æ¡å‡æºè‡ªä½ æä¾›çš„æŠ¥å‘Šï¼‰**

#### **1. ç›ˆåˆ©å¢é•¿ä¸å¯æŒç»­ï¼š2025Q2åˆ©æ¶¦æ˜¯â€œé€æ”¯å¼çˆ†å‘â€ï¼Œ2026å¹´å°†æ–­å´–å¼å›è½**

> åŸºæœ¬é¢æŠ¥å‘Šæ‰¿è®¤ï¼š**TTMå‡€åˆ©æ¶¦åŒæ¯”ä¸º-14.5%**ï¼Œ2025å…¨å¹´é¢„æµ‹å‡€åˆ©æ¶¦420äº¿ï¼Œæ˜¯åŸºäº2024å¹´ä»…178.81äº¿çš„**135%å¢é€Ÿ**ã€‚

ä½†â€”â€”  
- **çŒªå‘¨æœŸæœ¬è´¨æ˜¯äº§èƒ½å‡ºæ¸…åçš„æŠ¥å¤æ€§åå¼¹**ï¼Œä¸æ˜¯æ°¸åŠ¨æœºã€‚  
- å†œä¸šå†œæ‘éƒ¨æ•°æ®æ˜¾ç¤ºï¼š**2025å¹´Q3æ¯çŒªå­˜æ è¿ç»­3ä¸ªæœˆä¸‹é™** â†’ è¿™æ„å‘³ç€**2026å¹´Q2å‡ºæ é‡å°†é”å‡**ã€‚  
- ç‰§åŸ2025Q2å‡€åˆ©æ¶¦105äº¿ï¼Œ**å·²æ¥è¿‘2024å¹´å…¨å¹´åˆ©æ¶¦ï¼ˆ178äº¿ï¼‰çš„60%**ã€‚  
- è‹¥2026å¹´çŒªä»·å›è½è‡³16å…ƒ/kgï¼ˆå½“å‰çº¦20å…ƒ/kgï¼‰ï¼Œå…¶å•ä½åˆ©æ¶¦å°†**ä»300å…ƒ/å¤´é™è‡³80å…ƒ/å¤´**ï¼Œå‡€åˆ©æ¶¦å°†**è…°æ–©è‡³200äº¿ä»¥ä¸‹**ã€‚

> **ç»“è®º**ï¼šå¸‚åœºç”¨**2025å¹´Q2çš„å•å­£åˆ©æ¶¦**æ¨ç®—å…¨å¹´ï¼Œå†ç”¨å…¨å¹´åˆ©æ¶¦æ¨ç®—PEï¼Œæ˜¯å…¸å‹çš„â€œ**åˆ©æ¶¦å¹»è§‰**â€ã€‚**2026å¹´ç›ˆåˆ©å°†å›å½’å‡å€¼ï¼ŒåŠ¨æ€PEå°†ä»6.73å€é£™å‡è‡³15å€ä»¥ä¸Š**ï¼Œä¼°å€¼ä½“ç³»å´©å¡Œã€‚

#### **2. DCFä¼°å€¼æ˜¯â€œæ•°å­¦é­”æœ¯â€ï¼ŒçœŸå®è‡ªç”±ç°é‡‘æµæ— æ³•æ”¯æ’‘200å…ƒç›®æ ‡ä»·**

> æŠ¥å‘Šä¸­DCFæ¨¡å‹å‡è®¾2025å¹´FCF=341äº¿ï¼Œä½†2025Q2ç»è¥ç°é‡‘æµå‡€é¢/è‚¡ä»…3.18å…ƒ â†’ å¹´åŒ–=6.36å…ƒ/è‚¡ Ã— 53.72äº¿è‚¡ = **341äº¿**ã€‚

**é—®é¢˜åœ¨å“ªï¼Ÿ**

- **ç»è¥ç°é‡‘æµå‡€é¢ â‰  çœŸå®è‡ªç”±ç°é‡‘æµ**ã€‚  
- ç‰§åŸæ˜¯**é‡èµ„äº§å…»æ®–ä¼ä¸š**ï¼Œæ¯å¹´èµ„æœ¬å¼€æ”¯ï¼ˆCAPEXï¼‰è¶…**200äº¿**ï¼ˆ2024å¹´ä¸º215äº¿ï¼‰ã€‚  
- **çœŸå®FCF = ç»è¥ç°é‡‘æµ - èµ„æœ¬å¼€æ”¯ = 341 - 200 = 141äº¿**ï¼ˆä¸æ˜¯341äº¿ï¼ï¼‰  
- è‹¥æŒ‰çœŸå®FCF=141äº¿è®¡ç®—ï¼Œ**P/FCF = 2922 / 141 â‰ˆ 20.7å€**ï¼Œè¿œé«˜äºè¡Œä¸šå‡å€¼ï¼ˆ10â€“15å€ï¼‰ï¼

> **DCFæ¨¡å‹ä¸­éšå«â€œèµ„æœ¬å¼€æ”¯å½’é›¶â€å‡è®¾**ï¼Œè¿™æ˜¯å…¸å‹**åˆ†æå¸ˆç¾åŒ–æ¨¡å‹**ã€‚  
> **çœŸå®DCFä¼°å€¼åº”ä¸ºï¼š60â€“75å…ƒï¼Œè€Œé120â€“150å…ƒ**ã€‚  
> **å¸‚åœºæ­£ç”¨è™šå‡ç°é‡‘æµå®šä»·ï¼Œè¿™æ˜¯ç©ºå¤´çš„ç»ä½³çªç ´å£**ã€‚

#### **3. PB=3.84å€æ˜¯â€œç”Ÿç‰©èµ„äº§æ³¡æ²«â€ï¼Œèµ„äº§è´¨é‡è¢«ä¸¥é‡é«˜ä¼°**

> æŠ¥å‘Šç§°ï¼šâ€œç‰§åŸèµ„äº§è´¨é‡ä¼˜äºåŒè¡Œï¼Œåº”äº«æœ‰æº¢ä»·â€ã€‚

ä½†â€”â€”  
- **ç‰§åŸçš„å‡€èµ„äº§ä¸­ï¼Œç”Ÿç‰©èµ„äº§ï¼ˆç§çŒªã€ä»”çŒªï¼‰å æ¯”è¶…60%**ï¼ˆ2025Q2è´¢æŠ¥æŠ«éœ²ï¼šç”Ÿç‰©èµ„äº§çº¦850äº¿ï¼Œå‡€èµ„äº§760äº¿ â†’ ä¸å¯èƒ½ï¼Œé€»è¾‘çŸ›ç›¾ï¼‰ã€‚  
- **ä¼šè®¡å‡†åˆ™å…è®¸æŒ‰å…¬å…ä»·å€¼è®¡é‡ç”Ÿç‰©èµ„äº§**ï¼Œä½†**çŒªä»·ä¸‹è·Œ10%ï¼Œç”Ÿç‰©èµ„äº§ç›´æ¥å‡å€¼200äº¿+**ã€‚  
- 2025Q2å‡€èµ„äº§/è‚¡=14.17å…ƒï¼Œè‚¡ä»·54.38å…ƒ â†’ PB=3.84ã€‚  
- ä½†è‹¥2026å¹´çŒªä»·å›è°ƒï¼Œ**ç”Ÿç‰©èµ„äº§å…¬å…ä»·å€¼ä¸‹è°ƒ20%** â†’ å‡€èµ„äº§å°†éª¤é™è‡³11.3å…ƒ â†’ **PBå°†é£™å‡è‡³4.8å€**ï¼Œ**è‚¡ä»·å¿…é¡»è·Œè‡³54å…ƒä»¥ä¸‹æ‰èƒ½ç»´æŒä¼°å€¼**ã€‚

> **ç»“è®º**ï¼š**PB 3.84ä¸æ˜¯â€œåˆç†æº¢ä»·â€ï¼Œè€Œæ˜¯â€œèµ„äº§æ³¡æ²«â€**ã€‚å¸‚åœºç”¨â€œæœªæ¥çŒªä»·â€æŠµæŠ¼å½“å‰è‚¡ä»·ï¼Œä¸€æ—¦çŒªä»·é¢„æœŸé€†è½¬ï¼Œ**å‡€èµ„äº§å°†å¡Œæ–¹**ã€‚

#### **4. æŠ€æœ¯èµ°åŠ¿æ˜¯â€œè¯±å¤šé™·é˜±â€ï¼šé‡èƒ½èç¼©+ä¸»åŠ›å‡ºè´§è¿¹è±¡å·²ç°**

> è¶‹åŠ¿æŠ¥å‘Šç§°ï¼šâ€œé‡èƒ½ç»´æŒ40â€“50ä¸‡æ‰‹ï¼Œå±å¥åº·è°ƒæ•´â€ã€‚

ä½†â€”â€”  
- **09-15æœ€é«˜ç‚¹59.68å…ƒæ—¶ï¼Œå•æ—¥æˆäº¤115ä¸‡æ‰‹**ã€‚  
- **09-19æ”¶ç›˜54.38å…ƒï¼Œæˆäº¤ä»…48ä¸‡æ‰‹**ã€‚  
- **ä»59.68â†’54.38ï¼Œè·Œå¹…8.9%ï¼Œä½†æˆäº¤é‡èç¼©58%**ï¼

è¿™æ˜¯ä»€ä¹ˆï¼Ÿ  
â†’ **ä¸»åŠ›åœ¨é«˜ä½æ´¾å‘ï¼Œæ•£æˆ·åœ¨æ¥ç›˜**ã€‚  
â†’ **ç¼©é‡å›è°ƒï¼Œä¸æ˜¯å¥åº·è°ƒæ•´ï¼Œæ˜¯â€œæ— äººæ¥ç›˜çš„ææ…Œæ€§å‡ºé€ƒå‰å…†â€**ã€‚  
â†’ MACDè™½åœ¨é›¶è½´ä¸Šæ–¹ï¼Œä½†**DIFFä¸DEAæŸ±çŠ¶ä½“é«˜åº¦å·²è¿ç»­3æ—¥æ”¶çª„**ï¼Œ**å¤šå¤´åŠ¨èƒ½è¡°ç«­**ã€‚

> **æŠ€æœ¯é¢çœŸæ­£çš„å±é™©ä¿¡å·**ï¼š  
> - 59.68å…ƒæ˜¯**2025å¹´å†å²å¤©ä»·**ï¼Œæœºæ„æŒä»“æˆæœ¬åœ¨50â€“55å…ƒåŒºé—´ã€‚  
> - å½“å‰è‚¡ä»·54.38å…ƒï¼Œ**åˆšå¥½åœ¨ä¸»åŠ›æˆæœ¬åŒºé¡¶éƒ¨**ã€‚  
> - **çªç ´58.5å…ƒéœ€è¦è‡³å°‘70ä¸‡æ‰‹æ”¾é‡**ï¼Œä½†è¿‘5æ—¥æœ€é«˜ä»…52ä¸‡æ‰‹ã€‚  
> **çªç ´å¤±è´¥ï¼Œå³ä¸ºåè½¬ä¿¡å·**ã€‚

#### **5. è¡Œä¸šå‘¨æœŸå·²åˆ°â€œæ”¿ç­–æ‰˜åº•æœ«æœŸâ€ï¼ŒçŒªä»·è§é¡¶å›è½é£é™©æé«˜**

> æŠ¥å‘Šç§°ï¼šâ€œå›½å®¶æ”¶å‚¨æœºåˆ¶å¸¸æ€åŒ–ï¼ŒçŒªä»·åº•éƒ¨æ”¯æ’‘å¢å¼ºâ€ã€‚

ä½†â€”â€”  
- **2025å¹´Q3ï¼Œå…¨å›½èƒ½ç¹æ¯çŒªå­˜æ é‡å·²å›å‡è‡³4050ä¸‡å¤´**ï¼ˆå†œä¸šå†œæ‘éƒ¨æœ€æ–°æ•°æ®ï¼‰ï¼Œ**è¶…è¿‡æ­£å¸¸ä¿æœ‰é‡ï¼ˆ4100ä¸‡å¤´ï¼‰ä¸´ç•Œç‚¹**ã€‚  
- **2025å¹´Q4ï¼Œç”ŸçŒªå‡ºæ é‡é¢„è®¡åŒæ¯”å¢é•¿12%**ï¼ˆå†œä¸šå†œæ‘éƒ¨é¢„æµ‹ï¼‰ï¼Œ**ä¾›ç»™è¿‡å‰©å°†é‡ç°**ã€‚  
- **æ”¿ç­–æ”¶å‚¨æ˜¯â€œæ‰˜åº•â€ï¼Œä¸æ˜¯â€œæ‰˜å¤©â€**ã€‚å½“çŒªä»·æ¶¨è‡³22å…ƒ/kgï¼Œ**å›½å®¶å·²å¼€å§‹æŠ›å‚¨**ï¼ˆ2025å¹´8æœˆå·²å¯åŠ¨ä¸­å¤®å‚¨å¤‡å†»çŒªè‚‰æŠ•æ”¾ï¼‰ã€‚  
- **å± å®°ä¼ä¸šåº“å­˜é«˜ä¼**ï¼šåŒæ±‡ã€æ–°å¸Œæœ›ç­‰å·¨å¤´åº“å­˜ç¯æ¯”+18%ï¼Œ**è¯´æ˜ç»ˆç«¯æ¶ˆè´¹ç–²è½¯**ã€‚

> **ç»“è®º**ï¼š**çŒªä»·ä¸Šæ¶¨çš„â€œæƒ…ç»ªå‘¨æœŸâ€å·²åˆ°å°¾å£°**ã€‚å¸‚åœºæŠŠâ€œæ”¿ç­–æ‰˜åº•â€è¯¯è¯»ä¸ºâ€œä»·æ ¼æ— é™ä¸Šæ¶¨â€ï¼Œè¿™æ˜¯**å…¸å‹çš„å‘¨æœŸè®¤çŸ¥åå·®**ã€‚  
> **2025å¹´Q4ï¼ŒçŒªä»·å°†ä»20å…ƒ/kgå›è½è‡³17â€“18å…ƒ/kg**ï¼Œç‰§åŸåˆ©æ¶¦å°†**ä»105äº¿/å­£å›è½è‡³50â€“60äº¿/å­£**ã€‚

---

### ğŸ“‰ **è¡Œä¸šå‘¨æœŸä¸å¸‚åœºé£å‘ï¼šç©ºå¤´çš„å®è§‚èƒŒæ™¯**

- **Aè‚¡æ•´ä½“é£å‘**ï¼š2025å¹´9æœˆï¼Œç¾è”å‚¨æš—ç¤ºâ€œé«˜åˆ©ç‡æ›´ä¹…â€ï¼Œäººæ°‘å¸è´¬å€¼å‹åŠ›åŠ å‰§ï¼Œå¤–èµ„æµå‡ºæ¶ˆè´¹æ¿å—ã€‚  
- **å…»æ®–æ¿å—**ï¼šä½œä¸º**é«˜è´å¡”ã€å¼ºå‘¨æœŸã€ä½ç°é‡‘æµçœŸå®å›æŠ¥**çš„è¡Œä¸šï¼Œ**åœ¨æµåŠ¨æ€§æ”¶ç´§æœŸæœ€æ˜“è¢«æŠ›å¼ƒ**ã€‚  
- **æœºæ„è¡Œä¸º**ï¼šå…¬å‹ŸåŸºé‡‘åœ¨Q2æœ«å·²å¤§å¹…åŠ ä»“ç‰§åŸï¼ŒQ3å·²å¼€å§‹å‡ä»“ï¼ˆWindæ•°æ®æ˜¾ç¤ºï¼šå‰åå¤§å…¬å‹ŸåŸºé‡‘æŒä»“æ¯”ä¾‹ä»18.3%é™è‡³15.1%ï¼‰ã€‚  
- **èèµ„ä½™é¢**ï¼šç‰§åŸä¸¤èä½™é¢åœ¨9æœˆ15æ—¥è¾¾**67.2äº¿**ï¼ˆå æµé€šå¸‚å€¼23%ï¼‰ï¼Œåˆ›å†å²æ–°é«˜ â†’ **æ æ†èµ„é‡‘å·²æˆæ¥ç›˜ä¸»åŠ›**ã€‚

> **ç»“è®º**ï¼š**å¸‚åœºæƒ…ç»ªå·²è¿‡çƒ­ï¼Œæ æ†èµ„é‡‘ä¸æ•£æˆ·æˆä¸ºæœ€åçš„æ¥ç›˜è€…**ã€‚ä¸€æ—¦çŒªä»·é¢„æœŸé€†è½¬ï¼Œ**è¸©è¸å¼æŠ›å”®å°†ç¬é—´çˆ†å‘**ã€‚

---

### ğŸš¨ **ç©ºå¤´äº¤æ˜“ç­–ç•¥ï¼šçŸ­ã€ä¸­ã€é•¿æœŸä¸‰æ®µå¼æ€è·Œè·¯å¾„**

| æ—¶é—´å‘¨æœŸ | æ“ä½œé€»è¾‘ | ä»·æ ¼ç›®æ ‡ | æ­¢æŸè®¾ç½® |
|----------|----------|----------|----------|
| **çŸ­æœŸï¼ˆ1â€“2å‘¨ï¼‰** | åˆ©ç”¨54.38å…ƒåå¼¹è‡³55.5â€“56.5å…ƒåŒºé—´ï¼Œ**æ”¾é‡æ»æ¶¨**ä¸ºä¿¡å·ï¼Œ**å¼€ä»“å–å‡ºè®¤æ²½æœŸæƒï¼ˆè¡Œæƒä»·55å…ƒï¼‰**ï¼Œæˆ–**èåˆ¸å–å‡º5000è‚¡**ã€‚ | **52.0â€“53.0å…ƒ**ï¼ˆè·Œç ´æ”¯æ’‘å³åŠ é€Ÿï¼‰ | æ­¢æŸï¼š57.5å…ƒï¼ˆçªç ´åˆ™å¹³ä»“è®¤èµ”ï¼‰ |
| **ä¸­æœŸï¼ˆ1â€“3ä¸ªæœˆï¼‰** | è‹¥çŒªä»·åœ¨10æœˆè·Œç ´18å…ƒ/kgï¼Œ**å‘å¸ƒç›ˆåˆ©é¢„è­¦**ï¼Œ**è‚¡ä»·å°†è·Œç ´49.5å…ƒä¸­æœŸæ”¯æ’‘**ï¼Œå¯åŠ¨è¶‹åŠ¿æ€§ä¸‹è·Œã€‚æ­¤æ—¶**åŠ ä»“èåˆ¸ï¼Œä¹°å…¥çœ‹è·ŒæœŸæƒï¼ˆè¡Œæƒä»·45å…ƒï¼‰**ã€‚ | **42â€“45å…ƒ**ï¼ˆå›è¡¥2025Q2ä½ç‚¹ï¼‰ | æ­¢æŸï¼š50å…ƒï¼ˆè‹¥æ”¿ç­–ç´§æ€¥æ”¶å‚¨ï¼‰ |
| **é•¿æœŸï¼ˆ6â€“12ä¸ªæœˆï¼‰** | 2026å¹´Q2ï¼Œè¡Œä¸šè¿›å…¥æ–°ä¸€è½®äºæŸå‘¨æœŸï¼Œç‰§åŸå‡€åˆ©æ¶¦å›è½è‡³**80äº¿ä»¥ä¸‹**ï¼Œ**åŠ¨æ€PEé‡å›20å€+**ï¼Œ**DCFä¼°å€¼å›å½’50å…ƒ**ã€‚**æŒæœ‰ç©ºå¤´å¤´å¯¸è‡³PB<2.5å€**ã€‚ | **35â€“40å…ƒ**ï¼ˆå†å²ä¼°å€¼åº•éƒ¨ï¼‰ | æ­¢æŸï¼š60å…ƒï¼ˆè‹¥æ”¿ç­–å¼ºåˆ¶è¡¥è´´ï¼‰ |

---

### ğŸ’£ **æœ€ç»ˆç©ºå¤´ç»“è®ºï¼šè¿™ä¸æ˜¯ä½ä¼°ï¼Œè¿™æ˜¯â€œå‘¨æœŸæ³¡æ²«â€**

> **ä½ çœ‹åˆ°çš„æ˜¯â€œä¼°å€¼ä¿®å¤â€ï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯â€œåˆ©æ¶¦é€æ”¯â€**ã€‚  
> **ä½ çœ‹åˆ°çš„æ˜¯â€œæŠ€æœ¯çªç ´â€ï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯â€œé‡èƒ½æ¯ç«­â€**ã€‚  
> **ä½ çœ‹åˆ°çš„æ˜¯â€œç°é‡‘æµå¼ºåŠ²â€ï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯â€œèµ„æœ¬å¼€æ”¯é»‘æ´â€**ã€‚  
> **ä½ çœ‹åˆ°çš„æ˜¯â€œçŒªå‘¨æœŸä¸Šè¡Œâ€ï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯â€œäº§èƒ½å›æµã€æ”¿ç­–åå™¬â€**ã€‚

**ç‰§åŸè‚¡ä»½ï¼ˆ002714ï¼‰å½“å‰ä¸æ˜¯ä»·å€¼è‚¡ï¼Œæ˜¯å‘¨æœŸæŠ•æœºçš„ç»ˆæé™·é˜±ã€‚**

---

### âœ… **ç©ºå¤´äº¤æ˜“æŒ‡ä»¤ï¼ˆç«‹å³æ‰§è¡Œï¼‰**

1. **ä»Šæ—¥ï¼ˆ9æœˆ19æ—¥ï¼‰**ï¼šåœ¨54.5â€“55.0å…ƒåŒºé—´ï¼Œ**å–å‡º5000è‚¡èåˆ¸**ï¼ˆæˆ–ä¹°å…¥è¡Œæƒä»·55å…ƒã€10æœˆåˆ°æœŸè®¤æ²½æœŸæƒï¼Œ10å¼ ï¼‰ã€‚  
2. **è‹¥è‚¡ä»·åå¼¹è‡³56.5å…ƒä»¥ä¸Š**ï¼š**åŠ ä»“ç©ºå¤´**ï¼Œç›®æ ‡52å…ƒã€‚  
3. **è‹¥è·Œç ´52.0å…ƒ**ï¼š**åŠ ä»“è‡³æ»¡ä»“ç©ºå¤´**ï¼Œç›®æ ‡45å…ƒã€‚  
4. **è®¾ç½®è‡ªåŠ¨æ­¢æŸ**ï¼šè‹¥è‚¡ä»·çªç ´57.5å…ƒä¸”æ”¾é‡ï¼ˆ>60ä¸‡æ‰‹ï¼‰ï¼Œç«‹å³å¹³ä»“ï¼Œ**æ‰¿è®¤é”™è¯¯ï¼Œä¿ç•™æœ¬é‡‘**ã€‚

> **è¿™ä¸æ˜¯é¢„æµ‹ï¼Œè¿™æ˜¯åŸºäºä½ æä¾›æ•°æ®çš„é€»è¾‘æ¨æ¼”ã€‚**  
> **å¸‚åœºæ­£åœ¨ç”¨â€œç›ˆåˆ©å¹»è§‰â€å’Œâ€œDCFé­”æœ¯â€å–‚å…»æ•£æˆ·ï¼Œè€Œæˆ‘ï¼Œåªåƒæ³¡æ²«ã€‚**

---

**ç©ºå¤´ï¼Œä¸çœ‹æœªæ¥æœ‰å¤šå¥½ï¼Œåªçœ‹ç°åœ¨æœ‰å¤šå‡ã€‚**  
**ç‰§åŸï¼Œå·²ç«™åœ¨å‘¨æœŸçš„æ‚¬å´–è¾¹ç¼˜ã€‚**

**æˆ‘åšç©ºï¼Œä¸æ˜¯å› ä¸ºæˆ‘æƒ³å®ƒè·Œï¼Œæ˜¯å› ä¸ºå®ƒæ³¨å®šè¦è·Œã€‚**"""

class TestBasicAgent:

    def test_fundamental_analysis_agent(self):
        load_dotenv()  # This loads the variables from .env

        graph_builder = StateGraph(State)

        llm = QwenApi()
        tool = get_stock_info
        tools = [tool]
        config: RunnableConfig = {"configurable": {"thread_id": "1"}}
        agent = FundamentalAnalysisExpert(llm, tools, config)
        graph_builder.add_node("fundamental_analysis_expert", agent.fundamental_analysis_expert)
        tool_node = ToolNode(tools=[tool])
        graph_builder.add_node("tools", tool_node)

        def route_tools(
            state: State,
        ):
            """
            Use in the conditional_edge to route to the ToolNode if the last message
            has tool calls. Otherwise, route to the end.
            """
            if messages := state.get("messages", []):
                ai_message = messages[-1]
            else:
                raise ValueError(f"No messages found in input state to tool_edge: {state}")

            # Count tool calls to prevent infinite loops
            tool_call_count = sum(
                1 for msg in messages if hasattr(msg, "tool_calls") and msg.tool_calls
            )

            # Limit maximum tool calls
            MAX_TOOL_CALLS = 1
            if tool_call_count > MAX_TOOL_CALLS:
                logger.warning(
                    f"Reached maximum tool calls ({MAX_TOOL_CALLS}), ending conversation"
                )
                return END

            if hasattr(ai_message, "tool_calls") and len(ai_message.tool_calls) > 0:
                return "tools"
            return END


        # The `tools_condition` function returns "tools" if the fundamental_analysis_expert asks to use a tool, and "END" if
        # it is fine directly responding. This conditional routing defines the main agent loop.
        graph_builder.add_conditional_edges(
            "fundamental_analysis_expert",
            route_tools,
            # The following dictionary lets you tell the graph to interpret the condition's outputs as a specific node
            # It defaults to the identity function, but if you
            # want to use a node named something else apart from "tools",
            # You can update the value of the dictionary to something else
            # e.g., "tools": "my_tools"
            {"tools": "tools", END: END},
        )
        # Any time a tool is called, we return to the fundamental_analysis_expert to decide the next step
        graph_builder.add_edge("tools", "fundamental_analysis_expert")
        graph_builder.add_edge(START, "fundamental_analysis_expert")
        checkpointer = InMemorySaver()
        graph = graph_builder.compile(checkpointer=checkpointer)

        def stream_graph_updates(user_input: str):
            for event in graph.stream({"messages": [{"role": "user", "content": user_input}]}, config=config):
                for value in event.values():
                    print("Assistant:", value["messages"][-1].content)


        user_input = "è¯·å¸®æˆ‘åˆ†æä¸€ä¸‹ ç‰§åŸè‚¡ä»½ 002714 ï¼Œç»™å‡ºåˆç†çš„ä¼°å€¼åŒºé—´å’Œç›®æ ‡ä»·"
        print("User: " + user_input)
        stream_graph_updates(user_input)

        states = list(graph.get_state_history(config))

        for state in states:
            print(state.next)
            print(state.config["configurable"]["checkpoint_id"])
            print(state.values)
            print()

        print(states[0].values["fundamental_analysis"].content)


    def test_trend_analysis_agent(self):
        load_dotenv()  # This loads the variables from .env

        graph_builder = StateGraph(State)

        llm = QwenApi()
        tool = get_stock_info
        tools = [tool]
        config: RunnableConfig = {"configurable": {"thread_id": "1"}}
        agent = TrendAnalysisExpert(llm, tools, config)
        graph_builder.add_node("trend_analysis_expert", agent.trend_analysis_expert)
        tool_node = ToolNode(tools=[tool])
        graph_builder.add_node("tools", tool_node)

        def route_tools(
                state: State,
        ):
            """
            Use in the conditional_edge to route to the ToolNode if the last message
            has tool calls. Otherwise, route to the end.
            """
            if messages := state.get("messages", []):
                ai_message = messages[-1]
            else:
                raise ValueError(f"No messages found in input state to tool_edge: {state}")

            # Count tool calls to prevent infinite loops
            tool_call_count = sum(
                1 for msg in messages if hasattr(msg, "tool_calls") and msg.tool_calls
            )

            # Limit maximum tool calls
            MAX_TOOL_CALLS = 1
            if tool_call_count > MAX_TOOL_CALLS:
                logger.warning(
                    f"Reached maximum tool calls ({MAX_TOOL_CALLS}), ending conversation"
                )
                return END

            if hasattr(ai_message, "tool_calls") and len(ai_message.tool_calls) > 0:
                return "tools"
            return END

        # The `tools_condition` function returns "tools" if the fundamental_analysis_expert asks to use a tool, and "END" if
        # it is fine directly responding. This conditional routing defines the main agent loop.
        graph_builder.add_conditional_edges(
            "trend_analysis_expert",
            route_tools,
            # The following dictionary lets you tell the graph to interpret the condition's outputs as a specific node
            # It defaults to the identity function, but if you
            # want to use a node named something else apart from "tools",
            # You can update the value of the dictionary to something else
            # e.g., "tools": "my_tools"
            {"tools": "tools", END: END},
        )
        # Any time a tool is called, we return to the fundamental_analysis_expert to decide the next step
        graph_builder.add_edge("tools", "trend_analysis_expert")
        graph_builder.add_edge(START, "trend_analysis_expert")
        checkpointer = InMemorySaver()
        graph = graph_builder.compile(checkpointer=checkpointer)

        def stream_graph_updates(user_input: str):
            for event in graph.stream({"messages": [{"role": "user", "content": user_input}]}, config=config):
                for value in event.values():
                    print("Assistant:", value["messages"][-1].content)

        user_input = "è¯·å¸®æˆ‘åˆ†æä¸€ä¸‹ ç‰§åŸè‚¡ä»½ 002714 ï¼Œç»™å‡ºåˆç†çš„ä¼°å€¼åŒºé—´å’Œç›®æ ‡ä»·"
        print("User: " + user_input)
        stream_graph_updates(user_input)

        states = list(graph.get_state_history(config))

        for state in states:
            print(state.next)
            print(state.config["configurable"]["checkpoint_id"])
            print(state.values)
            print()

        print(states[0].values["trend_analysis"].content)

    def test_bullish_trader_agent(self):
        load_dotenv()  # This loads the variables from .env

        graph_builder = StateGraph(State)

        llm = QwenApi()
        config: RunnableConfig = {"configurable": {"thread_id": "1"}}
        agent = BullishTrader(llm, config)
        graph_builder.add_node("bullish_trader", agent.bullish_trader)

        graph_builder.add_edge(START, "bullish_trader")
        checkpointer = InMemorySaver()
        graph = graph_builder.compile(checkpointer=checkpointer)

        target_ticker = "002714"

        def stream_graph_updates(user_input: str):
            for event in graph.stream({"messages": [{"role": "user", "content": user_input}],
                                       "target_stock_ticker": target_ticker,
                                       "fundamental_analysis": dummy_fundamental_analysis,
                                       "trend_analysis": dummy_trend_analysis,
                                       }, config=config):
                for value in event.values():
                    print("Assistant:", value["messages"][-1].content)


        user_input = f"è¯·å¸®æˆ‘åˆ†æä¸€ä¸‹ ç‰§åŸè‚¡ä»½ ${target_ticker} ï¼Œç»™å‡ºåˆç†çš„ä¼°å€¼åŒºé—´å’Œç›®æ ‡ä»·"
        print("User: " + user_input)
        stream_graph_updates(user_input)

        states = list(graph.get_state_history(config))

        for state in states:
            print(state.next)
            print(state.config["configurable"]["checkpoint_id"])
            print(state.values)
            print()

        print(states[0].values["bullish_opinions"][-1].content)


    def test_bearish_trader_agent(self):
        load_dotenv()  # This loads the variables from .env

        graph_builder = StateGraph(State)

        llm = QwenApi()
        config: RunnableConfig = {"configurable": {"thread_id": "1"}}
        agent = BearishTrader(llm, config)
        graph_builder.add_node("bearish_trader", agent.bearish_trader)

        graph_builder.add_edge(START, "bearish_trader")
        checkpointer = InMemorySaver()
        graph = graph_builder.compile(checkpointer=checkpointer)

        target_ticker = "002714"

        def stream_graph_updates(user_input: str):
            for event in graph.stream({"messages": [{"role": "user", "content": user_input}],
                                       "target_stock_ticker": target_ticker,
                                       "fundamental_analysis": dummy_fundamental_analysis,
                                       "trend_analysis": dummy_trend_analysis,
                                       }, config=config):
                for value in event.values():
                    print("Assistant:", value["messages"][-1].content)


        user_input = f"è¯·å¸®æˆ‘åˆ†æä¸€ä¸‹ ç‰§åŸè‚¡ä»½ ${target_ticker} ï¼Œç»™å‡ºåˆç†çš„ä¼°å€¼åŒºé—´å’Œç›®æ ‡ä»·"
        print("User: " + user_input)
        stream_graph_updates(user_input)

        states = list(graph.get_state_history(config))

        for state in states:
            print(state.next)
            print(state.config["configurable"]["checkpoint_id"])
            print(state.values)
            print()

        print(states[0].values["bearish_opinions"][-1].content)